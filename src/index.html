<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>...</title>
    <link rel="stylesheet" href="./css/app.css" />
</head>
<body>

<header role="banner">
    <!-- <h1>InstaGPX</h1>
    <p>Create a picture to share with your activity stats and any of your photos</p>
    <p>Upload your GPX acitvity file and image and select your favorite style</p> -->
</header>

<main role="main" id="app">

    <div class="app-header">
        <div role="form">
            <p>
                <label for="user-file-gpx">.gpx file</label>
                <br><input type="file" accept=".gpx" @change="loadGPX" id="user-file-gpx" />
            </p>
            <hr>
            <p>
                <label for="user-file-gpx">image</label>
                <br><input type="file" accept="image/*" @change="loadIMG" id="user-file-image" />
            </p>
        </div>
        <ul v-if="gpxLoaded">
            <li><strong>User data loaded</strong> : {{ userDataLoaded }} </li>
            <li>Distance :  {{ gpx.distance.kmÂ }} (km)</li>
            <li>Duration : {{ gpx.duration.hours }}h{{ gpx.duration.minutes }}m{{ gpx.duration.seconds }}s</li>
            <li>Speed: {{ gpx.speed.kmh }} (km/h)</li>
            <li>Pace: {{ gpx.pace.perKm.minutes }}:{{ gpx.pace.perKm.seconds }} (min/Km)</li>
            <li>Elevation Gain: {{ gpx.elevation.gain }}m</li>
        </ul>
    </div>

    <hr>

    <figure class="instagpx">
        <div id="output"></div>
    </figure>
</main>

<footer role="contentinfo">
    <p>A project By : <strong><a href="https://moro.es" target="_blank" rel="noopener noreferrer" title="Author website: www.moro.es" data-tooltip data-tooltiplocation="top-right">Jorge Moreno</a> &middot; <a href="https://twitter.com/alterebro" target="_blank" rel="noopener noreferrer" title="Follow @alterebro on Twitter!" data-tooltip>@alterebro</a></strong></p>

    <h4>Share! :</h4>
    <ul>
        <li class="twitter"><a href="https://twitter.com/intent/tweet?text={TEXT}&url={URL}" target="_blank" rel="noopener noreferrer" title="Share on Twitter" data-tooltip data-tooltiplocation="top-right">Twitter</a></li>
        <li class="facebook"><a href="https://www.facebook.com/sharer.php?u={URL}" target="_blank" rel="noopener noreferrer" title="Share on FaceBook" data-tooltip>FaceBook</a></li>
        <li class="linkedin"><a href="https://www.linkedin.com/shareArticle?mini=true&url={URL}&title={TITLE}&summary={TEXT}&source=moro.es" target="_blank" rel="noopener noreferrer" title="Share on LinkedIn" data-tooltip>LinkedIn</a></li>
        <li class="email"><a href="mailto:?subject={TITLE}&amp;body={URL}%0A{TEXT}" target="_blank" rel="noopener noreferrer" title="Share it via E-Mail" data-tooltip data-tooltiplocation="top-left">Mail</a></li>
        <li class="telegram"><a href="https://telegram.me/share/url?url={URL}&amp;text={TEXT}" target="_blank" rel="noopener noreferrer" title="Share it via Telegram" data-tooltip data-tooltiplocation="top-left">Telegram</a></li>
    </ul>
</footer>


<script charset="utf-8">

const config = {
    width: 1280,
    height: 1280,
    padding: 80
}

function instaGPX(gpxData, imgData) {
    // console.log(gpxData, imgData);
    // console.log(imgData.height)

    let _canvas = document.createElement('canvas')
        _canvas.width = 1280;
        _canvas.height = 1280;
        _canvas.id = 'instaGPX';

    let ctx = _canvas.getContext('2d');
        // _ctx.putImageData(imgData, 0, 0);

        ctx.fillStyle = '#fafbfc';
        ctx.fillRect(10, 10, config.width - 20, config.height - 20);

        ctx.fillStyle = 'black';
        ctx.textBaseline = 'alphabetic';

        let _third = Math.round((config.width - (config.padding*4))/3)
        ctx.font = '300 64px sans-serif';
        ctx.fillText('01h23m34s', config.padding, config.height - config.padding);
        ctx.fillText('16.78km/h', config.padding*2 + _third, config.height - config.padding);
        ctx.fillText('12.34km', (config.padding*3) + (_third*2), config.height - config.padding);

        ctx.font = '400 22px sans-serif';
        ctx.fillText('ACTIVITY TIME', config.padding, config.height - config.padding - 80);
        ctx.fillText('SPEED', config.padding*2 + _third, config.height - config.padding - 80);
        ctx.fillText('DISTANCE', (config.padding*3) + (_third*2), config.height - config.padding - 80);

        


        // console.log(ctx);

        document.querySelector('#output').innerHTML = '';
        document.querySelector('#output').appendChild(_canvas);

}

window.onload = function() {

    instaGPX(false, false)

}
</script>

<script src="./js/vue.min.js"></script>
<script src="./js/gpx.js" charset="utf-8"></script>
<script src="./js/img.js" charset="utf-8"></script>
<script src="./js/app.js" charset="utf-8"></script>

</body>
</html>
